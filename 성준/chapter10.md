# 📘 도커 교과서 Chapter 10  
## 도커 컴포즈를 이용한 여러 환경 구성  
### 개념 확인 문제 10문항(정답 및 해설 포함)

---

## ✔️ 문제(10문항)

### **1. (개념)**  
도커 컴포즈를 사용하는 가장 핵심 목적은 무엇인가?  
A. 단일 컨테이너만 실행하기 위해  
B. 복잡한 멀티 컨테이너 애플리케이션을 하나의 선언적 파일로 관리하기 위해  
C. Dockerfile의 빌드 속도를 높이기 위해  
D. 컨테이너 로그를 자동 백업하기 위해  

---

### **2. (여러 애플리케이션 배포)**  
10.1에서 설명하는 “여러 개의 애플리케이션 배포”의 핵심 개념은?  
A. 애플리케이션별로 독립적인 docker-compose.yml을 반드시 분리해야 한다  
B. 하나의 컴포즈 파일에서 여러 서비스(컨테이너)를 정의해 함께 실행한다  
C. 애플리케이션 하나당 Docker 네트워크를 반드시 분리한다  
D. 도커 데몬 하나마다 컴포즈 파일을 등록한다  

---

### **3. (오버라이드 파일)**  
다음 중 **docker-compose.override.yml** 파일의 역할을 가장 잘 설명한 것은?  
A. 항상 프로덕션 환경을 위한 설정만 포함한다  
B. 기본 compose 파일의 설정을 확장하거나 덮어쓴다  
C. docker-compose.yml을 완전히 대체한다  
D. 모든 컨테이너의 이미지 버전을 강제로 동일하게 만든다  

---

### **4. (오버라이드 적용 방식)**  
컴포즈 오버라이드 파일이 자동 적용되는 조건으로 옳은 것은?  
A. 파일 이름이 `production.yml`이면 자동 적용된다  
B. docker-compose.yml과 같은 디렉토리에 override 파일이 있을 때  
C. docker 데몬이 override 옵션을 자동 감지한다  
D. CLI 실행 없이도 항상 모든 yml 파일이 합쳐진다  

---

### **5. (환경 변수 설정)**  
도커 컴포즈에서 **환경 변수**를 구성하는 대표적인 방법이 아닌 것은?  
A. docker-compose.yml의 environment 키  
B. .env 파일  
C. secrets 키  
D. Dockerfile의 ENTRYPOINT  

---

### **6. (비밀값 관리)**  
다음 중 **비밀값(secrets)**를 사용하는 가장 적절한 이유는?  
A. 운영체제 환경 변수보다 조회가 빠르기 때문에  
B. CI/CD가 자동으로 Dockerfile을 수정해 주기 때문에  
C. 민감한 정보(DB 비밀번호 등)를 안전하게 컨테이너 내부에서 전달하기 위해  
D. 도커 이미지 용량을 줄이기 위해  

---

### **7. (확장 필드)**  
컴포즈 YAML에서 확장 필드(Anchors & Aliases)를 사용하는 목적은?  
A. 파일 크기를 늘려 더 많은 정보를 기록하기 위해  
B. 특정 서비스의 설정을 숨기기 위해  
C. 중복된 설정을 재사용하여 유지보수를 쉽게 하기 위해  
D. 모든 설정값을 암호화하기 위해  

---

### **8. (확장 필드 문법)**  
다음 중 YAML 확장 필드를 사용하는 올바른 방식은?  
A. `*extend` 로 선언하고 `&ref` 로 가져온다  
B. `&common` 으로 정의하고 `<<: *common` 으로 확장한다  
C. `extends: true` 라는 키워드로 확장 선언  
D. `!reuse` 태그를 사용해 공통 설정을 상속  

---

### **9. (설정 워크플로)**  
10.5에서 설명하는 “도커 기반 설정 워크플로”의 핵심 개념은 무엇인가?  
A. Dockerfile과 Compose 파일이 완전히 분리되어야 한다  
B. 설정은 환경마다 파일을 바꿔치기하는 방식으로 관리해야 한다  
C. 실행 환경별 설정을 Compose 파일/override 파일/환경 변수/비밀값으로 체계적으로 구성한다  
D. 설정은 컨테이너 이미지 내부에 직접 하드코딩해야 한다  

---

### **10. (운영 관점)**  
여러 환경(dev, stage, prod)을 Compose로 함께 운용할 때 가장 올바른 방식은?  
A. 환경마다 완전히 별도의 컴포즈 파일 세트를 무조건 만든다  
B. 공통 설정은 기본 compose 파일에 두고 환경별 설정은 override 파일로 분리한다  
C. 모든 환경 설정을 하나의 파일에 작성하고 실행 때마다 수동으로 수정한다  
D. 어떤 환경에서도 secrets를 사용하면 안 된다  

---

---

# ✔️ 정답 및 해설

### **1. 정답: B**  
Compose는 복수 컨테이너 애플리케이션을 선언적으로 관리하는 도구.

### **2. 정답: B**  
여러 서비스를 한 파일에 정의 → `docker-compose up` 한 번으로 전체 실행.

### **3. 정답: B**  
override 파일은 기본 compose 설정을 “확장/덮어쓰기”하는 목적.

### **4. 정답: B**  
이름이 `docker-compose.override.yml`이고 같은 디렉토리에 있으면 자동 병합된다.

### **5. 정답: D**  
ENTRYPOINT는 실행 명령이며 환경 변수 주입 방법이 아니다.

### **6. 정답: C**  
secrets는 민감한 정보를 안전하게 전달하기 위한 기능.

### **7. 정답: C**  
YAML 확장 필드를 사용하면 설정 중복 제거 가능.

### **8. 정답: B**  
정확한 패턴
```yaml
common: &common
  image: nginx
serviceA:
  <<: *common
```

9. 정답: C

환경별 compose 분리 + override + env + secrets = 정형화된 설정 워크플로.

10. 정답: B

Compose의 정석: “공통 = base 파일, 환경별 = override 파일”.